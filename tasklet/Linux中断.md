# Linux kernel interrupt（中断）
- 作者：Match

## 中断的作用
- easy 一张图就能解释这个问题
![interrupt.png](D:/images/interrupt.png)

## Linux kernel是怎么来使用interrupt的？
- 简单来说linux kernel维护了一张中断向量表，当有中断发生的时候，内核会根据中断号去中断向量表中找到对应的中断处理代码，然后保护现场并跳转进入中断处理程序。处理完以后再跳出来并回复现场。这样一次完整的中断的OK了。一般来说中断处理程序要求是能快速处理的程序，不允许添加各种锁，或者延时，或者会引起调度(schedule)的代码。为什么不允许？因为中断打断了原来的程序，然后中断处理程序又因为某种原因耗时很长，或者死锁了，那就无法回到原来的程序了，也就是卡住了。

### 万一非要在中断中延时或者影响中断处理效率的操作怎么办？
- 早有骨灰级大神给我们想好办法了，那就是把中断分成上半部和下半部，上半部负责处理快速的必要的处理，下半部则在可以做一些稍微复杂的操作。

